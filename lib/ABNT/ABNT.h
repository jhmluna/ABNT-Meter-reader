/*
	ABNT.h - Library to keep ABNT standard information.
*/
#ifndef ABNT_H
#define ABNT_H

#include <Arduino.h>

// Set up serial
const int baudRate = 9600;	// Serial Baude rate for meter communication
const int blockSize = 258;	// Response Block Size
byte receivedBytes[blockSize] = {};

class Abnt
{
	// Códigos ABNT NBR 14522:2008 para sincronizar comunicação
	const int _ENQ = 0x05;
	const int _ACK = 0x06;
	const int _NAK = 0x15;

	// Array with Command 23 - Reading registers of visible channels.
	const byte command_23[66];

public:
	Abnt()
			: command_23{0x23, 0x12, 0x34, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
									 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
									 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
									 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
									 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
									 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x0b}
	{
	}
	bool sendCommand_23(void);
	bool receiveBytes(void);
};

#endif